<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>GitHub Data Extractor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/web/styles.css"/>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
          </svg>
        </div>
        <div>
          <h1>GitHub Extractor</h1>
          <p class="version">v1.0.0</p>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>Extraction Tools</h3>
          <button class="nav-btn active" data-tool="file-commit-history">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
            </svg>
            File Commit History
          </button>
          <button class="nav-btn" data-tool="pull-request-extractor">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="18" cy="18" r="3"/>
              <circle cx="6" cy="6" r="3"/>
              <path d="M13 6h3a2 2 0 0 1 2 2v7"/>
              <path d="M6 9v12"/>
            </svg>
            Pull Requests
          </button>
        </div>
        
        <div class="nav-section">
          <h3>System</h3>
          <button class="nav-btn" id="auditLogBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <path d="M14 2v6h6"/>
              <path d="M16 13H8"/>
              <path d="M16 17H8"/>
              <path d="M10 9H8"/>
            </svg>
            Audit Logs
          </button>
          <button class="nav-btn" id="settingsBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
            Settings
          </button>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="connection-status">
          <span class="status-indicator online"></span>
          <span>Connected</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header Bar -->
      <header class="header-bar">
        <div class="header-left">
          <h2 id="pageTitle">File Commit History</h2>
          <p class="header-desc" id="pageDesc">Extract commit history for specific files across repositories</p>
        </div>
        <div class="header-right">
          <div class="token-status-badge" id="tokenStatusBadge">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <span id="tokenStatusText">No Token</span>
          </div>
        </div>
      </header>

      <!-- Content Area -->
      <div class="content-wrapper">
        <div class="content-grid">
          <!-- Left Column -->
          <div class="grid-column">
            <!-- Authentication Card -->
            <section class="card" id="authCard">
              <div class="card-header">
                <h3>Authentication</h3>
                <p class="card-desc">Configure your GitHub personal access token for API access</p>
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label for="token">GitHub Token</label>
                  <div class="input-group">
                    <input type="password" id="token" placeholder="ghp_************************" class="form-input"/>
                    <button id="saveTokenBtn" class="btn-primary">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                      </svg>
                      Save Token
                    </button>
                  </div>
                  <p class="help-text">Your token is stored locally in your browser</p>
                </div>
              </div>
            </section>

            <!-- Extraction Form -->
            <section class="card" id="extractionCard">
              <div class="card-header">
                <h3>Configure Extraction</h3>
                <p class="card-desc">Set parameters for your data extraction</p>
              </div>
              <div class="card-body">
                <div id="formContainer"></div>
                <div class="form-actions">
                  <button id="runBtn" class="btn-primary btn-lg">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polygon points="5 3 19 12 5 21 5 3"/>
                    </svg>
                    Start Extraction
                  </button>
                </div>
              </div>
            </section>
          </div>

          <!-- Right Column -->
          <div class="grid-column">
            <!-- Progress Section -->
            <section class="card hidden" id="progressCard">
              <div class="card-header">
                <h3>Extraction Progress</h3>
                <div class="progress-status" id="progressStatus">
                  <span class="status-badge running">Running</span>
                </div>
              </div>
              <div class="card-body">
                <div class="progress-container">
                  <div class="progress-bar">
                    <div id="bar" class="progress-fill" style="width:0%"></div>
                  </div>
                  <div class="progress-info">
                    <span id="progressPercent">0%</span>
                    <span id="progressMsg" class="progress-message"></span>
                  </div>
                </div>
                
                <div class="log-container">
                  <div class="log-header">
                    <h4>Execution Log</h4>
                    <button class="btn-text" id="clearLogBtn">Clear</button>
                  </div>
                  <pre id="log" class="log-output"></pre>
                </div>
              </div>
            </section>

            <!-- Results Section -->
            <section class="card hidden" id="resultsCard">
              <div class="card-header compact">
                <div class="header-with-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="success-icon-inline">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                  </svg>
                  <h3>Extraction Complete</h3>
                </div>
                <button class="btn-text" id="viewAuditBtn">View Audit Log</button>
              </div>
              <div class="card-body ultra-compact">
                <div class="downloads-grid" id="outputs"></div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Audit Log Modal -->
  <div class="modal hidden" id="auditModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Audit Logs</h3>
        <button class="modal-close" id="closeAuditBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="audit-controls">
          <button id="refreshAudit" class="btn-secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <polyline points="1 20 1 14 7 14"/>
              <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
            </svg>
            Refresh
          </button>
          <span class="audit-count" id="auditCount">Last 100 entries</span>
        </div>
        <div id="auditList" class="audit-list"></div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal hidden" id="settingsModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" id="closeSettingsBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h4>API Configuration</h4>
          <div class="form-group">
            <label>API Endpoint</label>
            <input type="text" value="https://api.github.com" class="form-input" disabled/>
          </div>
        </div>
        <div class="settings-section">
          <h4>Display Preferences</h4>
          <div class="form-group">
            <label>
              <input type="checkbox" checked/> Show verbose logs
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" checked/> Auto-refresh audit logs
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/web/app.js"></script>
</body>
</html>